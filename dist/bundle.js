(()=>{"use strict";var t,e,n;(n=t||(t={})).CHANGEBACKGROUND="CHANGEBACKGROUND",n.NAVIGATE="NAVIGATE",n.REMOVE_FROM_CART="REMOVE_FROM_CART",n.GET_PRODUCTS="GET_PRODUCTS",n.ADD_TASK="ADD_TASK",function(t){t.DASHBOARD="DASHBOARD"}(e||(e={}));let o=(t=>{const e=localStorage.getItem(t)||sessionStorage.getItem(t);return e?JSON.parse(e):{screen:"DASHBOARD",backgroundColor:"black",username:"Juanes",id:12345,products:[]}})("STORE"),r=[];const i=e=>{const n=((e,n)=>{const{action:o,payload:r}=e;switch(o){case t.CHANGEBACKGROUND:return Object.assign(Object.assign({},n),{backgroundColor:r});case t.NAVIGATE:return Object.assign(Object.assign({},n),{screen:r});case t.REMOVE_FROM_CART:{const t=[...n.products];console.log("PAYLOAD",r),console.log(n.products);const e=t.findIndex((t=>t.uid===r.uid));return-1!==e&&t.splice(e,1),Object.assign(Object.assign({},n),{products:t})}case t.GET_PRODUCTS:return Object.assign(Object.assign({},n),{products:r});case t.ADD_TASK:const e={uid:(new Date).getTime(),utitle:r.utitle,description:r.description,completedtasks:!1};return Object.assign(Object.assign({},n),{products:[...n.products,e]});default:return n}})(e,JSON.parse(JSON.stringify(o)));o=n,((t,e,n=!1)=>{const o=n?sessionStorage:localStorage,r=JSON.stringify(e);o.setItem(t,r)})("STORE",n),r.forEach((t=>t.render()))},s=t=>{r=[...r,t]};const c=()=>{return e=void 0,n=void 0,r=function*(){const e=yield(n=void 0,o=void 0,r=void 0,i=function*(){try{const t=yield fetch("https://fakestoreapi.com/products");return yield t.json()}catch(t){return console.error("Error fetching products: ",t),[]}},new(r||(r=Promise))((function(t,e){function s(t){try{a(i.next(t))}catch(t){e(t)}}function c(t){try{a(i.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(s,c)}a((i=i.apply(n,o||[])).next())})));var n,o,r,i;return console.log(e,"data"),{action:t.GET_PRODUCTS,payload:e}},new((o=void 0)||(o=Promise))((function(t,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(t){t(n)}))).then(s,c)}a((r=r.apply(e,n||[])).next())}));var e,n,o,r};var a,d;!function(t){t.uid="uid",t.utitle="utitle",t.description="description"}(a||(a={}));class u extends HTMLElement{static get observedAttributes(){return Object.keys(a)}attributeChangedCallback(t,e,n){t===a.uid?this[t]=n?Number(n):void 0:this[t]=n,this.render()}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}render(){var e,n,o;this.shadowRoot&&(this.shadowRoot.innerHTML='\n            <section>\n                <h1>Task Form</h1>\n                <form class="form">\n                    <input type="text" id="title" placeholder="Title of your task" required>\n                    <input type="text" id="description" placeholder="Description of your task" required>\n                    <button class="add-btn">Add Task</button>\n                </form>\n                <div class=\'container\'></div>\n            </section>\n            ');const r=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#title"),s=null===(n=this.shadowRoot)||void 0===n?void 0:n.querySelector("#description"),c=null===(o=this.shadowRoot)||void 0===o?void 0:o.querySelector(".add-btn");null==c||c.addEventListener("click",(e=>{e.preventDefault();const n=(null==r?void 0:r.value)||"",o=(null==s?void 0:s.value)||"";var c;n&&o?(i((c={utitle:n,description:o},{action:t.ADD_TASK,payload:c})),r&&(r.value=""),s&&(s.value="")):console.error("Title and description are required to add a task")}))}}customElements.define("task-form",u),function(t){t.uid="uid",t.image="image",t.description="description",t.category="category",t.price="price",t.rating="rating"}(d||(d={}));class l extends HTMLElement{static get observedAttributes(){return Object.values(d)}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(t,e,n){t===d.price||t===d.rating||t===d.uid?this[t]=n?Number(n):void 0:this[t]=n,this.render()}render(){if(!this.shadowRoot)return;this.shadowRoot.innerHTML=`\n        <style>\n        .product-card {\n            border: 1px solid #ccc;\n            padding: 10px;\n            margin: 10px;\n            width: 200px;\n            text-align: center;\n            background-color: #f9f9f9;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n    .product-card img {\n            max-width: 100%;\n            height: auto;\n            border-radius: 8px;\n        }\n\n        .product-card h2 {\n            font-size: 1.2em;\n            margin: 10px 0;\n        }\n\n        .product-card p {\n            margin: 5px 0;\n        }\n\n        .product-card button {\n            background-color: #007bff;\n            color: #fff;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n            transition: background-color 0.3s ease;\n        }\n\n        .product-card button:hover {\n            background-color: #0056b3;\n        }\n        </style>\n\n\n            <div class="product-card">\n                <h2>${this.description||"No description"}</h2>\n                <img src="${this.image||""}" alt="${this.description||""}" />\n                <p>Category: ${this.category||"N/A"}</p>\n                <p>Price: ${this.price?`$${this.price}`:"N/A"}</p>\n                <p>Rating: ${this.rating?`${this.rating}/5`:"No rating"}</p>\n                <button class="remove-btn">Remove</button>\n            </div>\n        `;const e=this.shadowRoot.querySelector(".remove-btn");null==e||e.addEventListener("click",(()=>{var e;i((e=this.uid,{action:t.REMOVE_FROM_CART,payload:e})),console.log(o.item)}))}}customElements.define("product-component",l);class p extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),s(this)}connectedCallback(){return t=this,e=void 0,r=function*(){if(void 0===o.products||0===o.products.length){const t=yield c();i(t),this.render()}this.render()},new((n=void 0)||(n=Promise))((function(o,i){function s(t){try{a(r.next(t))}catch(t){i(t)}}function c(t){try{a(r.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((r=r.apply(t,e||[])).next())}));var t,e,n,r}fetchProducts(){try{const t=this.ownerDocument.createElement("section");return t.className="products-container",o.products.forEach((e=>{const n=this.ownerDocument.createElement("product-component");n.setAttribute(d.uid,e.id.toString()),n.setAttribute(d.image,e.image),n.setAttribute(d.description,e.title),n.setAttribute(d.category,e.category),n.setAttribute(d.price,e.price.toString()),n.setAttribute(d.rating,e.rating.rate.toString()),t.appendChild(n)})),t}catch(t){return console.error("Error fetching products:",t),null}}renderTaskForm(){const t=this.ownerDocument.createElement("task-form"),e=(new Date).getTime();return t.setAttribute(a.uid,e.toString()),t.setAttribute(a.utitle,""),t.setAttribute(a.description,""),t}render(){if(this.shadowRoot){this.shadowRoot.innerHTML='\n                <style>\n                    .dashboard {\n                        display: flex;\n                        justify-content: space-between;\n                    }\n                    .products-container, .cart-container {\n                        width: 45%;\n                        padding: 10px;\n                    }\n                </style>\n                <div class="dashboard">\n                    <section class="products-container">Loading products...</section>\n                </div>\n            ';const t=this.fetchProducts();if(t){const e=this.shadowRoot.querySelector(".products-container");e&&e.replaceWith(t)}else this.shadowRoot.querySelector(".products-container").innerHTML="<p>Error loading products</p>";const e=this.ownerDocument.createElement("section");e.className="form-container";const n=this.renderTaskForm();e.appendChild(n),this.shadowRoot.appendChild(e)}}}customElements.define("app-list",p);class h extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),s(this)}connectedCallback(){this.render(),console.log(o.product)}render(){this.shadowRoot&&(this.shadowRoot.innerHTML="\n            <app-list></app-list>\n            ")}}customElements.define("app-container",h)})();